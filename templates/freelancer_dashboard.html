<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Freelancer Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
      font-family: 'Montserrat', Arial, sans-serif;
      min-height: 100vh;
    }
    .dashboard-container {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(60, 72, 100, 0.15);
      padding: 3rem 2rem 2rem 2rem;
      margin-top: 3rem;
      margin-bottom: 3rem;
      position: relative;
      overflow: hidden;
    }
    .dashboard-container:before {
      content: "";
      position: absolute;
      top: -80px;
      right: -80px;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, #6366f1 0%, #818cf8 100%);
      opacity: 0.15;
      border-radius: 50%;
      z-index: 0;
    }
    h2, h4 {
      font-weight: 700;
      color: #3730a3;
      letter-spacing: 1px;
    }
    .alert-info {
      background: linear-gradient(90deg, #e0e7ff 0%, #f1f5f9 100%);
      border: none;
      color: #3730a3;
      font-size: 1.1rem;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(99,102,241,0.07);
    }
    .btn-primary, .btn-success {
      font-weight: 600;
      letter-spacing: 0.5px;
      border-radius: 30px;
      padding: 0.6rem 2rem;
      transition: background 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(99,102,241,0.10);
    }
    .btn-primary {
      background: linear-gradient(90deg, #6366f1 0%, #818cf8 100%);
      border: none;
    }
    .btn-primary:hover {
      background: linear-gradient(90deg, #818cf8 0%, #6366f1 100%);
    }
    .btn-success {
      background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
      border: none;
    }
    .btn-success:hover {
      background: linear-gradient(90deg, #34d399 0%, #10b981 100%);
    }
    .fade-in {
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px);}
      to { opacity: 1; transform: translateY(0);}
    }
    .card {
      border: none;
      border-radius: 18px;
      box-shadow: 0 2px 16px rgba(99,102,241,0.08);
      transition: transform 0.15s;
      background: linear-gradient(120deg, #f1f5f9 0%, #e0e7ff 100%);
    }
    .card:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 8px 32px rgba(99,102,241,0.13);
    }
    .card-title {
      color: #3730a3;
      font-weight: 600;
    }
    .card-text {
      color: #334155;
    }
    .form-control, textarea {
      border-radius: 16px;
      border: 1px solid #c7d2fe;
      background: #f8fafc;
      font-size: 1rem;
    }
    .form-label {
      color: #6366f1;
      font-weight: 500;
    }
    #code-entry {
      background: #f1f5f9;
      border-radius: 18px;
      box-shadow: 0 2px 8px rgba(99,102,241,0.06);
      padding: 2rem 1rem 1rem 1rem;
      display: none;
      max-width: 400px;
      margin: 0 auto 2rem auto;
    }
    #submit-work-form {
      background: #f8fafc;
      border-radius: 18px;
      box-shadow: 0 2px 8px rgba(16,185,129,0.08);
      max-width: 500px;
      margin: 0 auto;
    }
    .apply-btn {
      border-radius: 30px;
      font-weight: 600;
      background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
      color: #fff;
      border: none;
      transition: background 0.2s;
    }
    .apply-btn:hover {
      background: linear-gradient(90deg, #34d399 0%, #10b981 100%);
      color: #fff;
    }
    @media (max-width: 600px) {
      .dashboard-container {
        padding: 1.2rem 0.5rem;
      }
      #submit-work-form, #code-entry {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container dashboard-container">
    <h2 class="mb-4 text-center fade-in">Welcome, Freelancer!</h2>

    <div class="alert alert-info mb-4 fade-in" role="alert">
      <strong>Note:</strong> You can alternatively pay the <span class="fw-bold">$10 USD</span> application fee by sending it directly to PayPal
      <a href="mailto:payhere38@gmail.com" class="text-decoration-underline fw-bold" style="color:#6366f1;">payhere38@gmail.com</a>
      or via PayPal to <span class="fw-bold">payhere38@gmail.com</span>.
    </div>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-success fade-in text-center" role="alert">
          {% for message in messages %}
            <div>{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- ðŸ”˜ Submit Work Button and Code Input -->
    <div class="text-center mb-4 fade-in">
      <button onclick="document.getElementById('code-entry').style.display='block'" class="btn btn-primary shadow">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" class="bi bi-upload me-2" viewBox="0 0 16 16">
          <path d="M.5 9.9a.5.5 0 0 1 .5.5v3.1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-3.1a.5.5 0 0 1 1 0v3.1A2 2 0 0 1 14 16H2a2 2 0 0 1-2-2v-3.1a.5.5 0 0 1 .5-.5z"/>
          <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V10.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
        </svg>
        Submit Work
      </button>
    </div>

    <div id="code-entry" class="fade-in">
      <input type="text" id="codeInput" class="form-control w-75 mx-auto mb-2" placeholder="Enter your code">
      <button onclick="verifyCode()" class="btn btn-success mt-2">Continue</button>
      <p id="errorMsg" class="text-danger mt-2" style="display:none;">Invalid code. Please try again.</p>
    </div>

    <!-- âœ… Hidden Submit Work Form (only shows after correct code) -->
    <div id="submit-work-form" style="display:none;" class="fade-in mt-5">
      <h4 class="text-center mb-4">Upload Your Work</h4>
      <form action="/submit-work" method="POST" enctype="multipart/form-data" class="border-0 p-4 rounded bg-white shadow-sm">
        <div class="mb-3">
          <label for="fileUpload" class="form-label">Upload File (Image, Video, Document)</label>
          <input class="form-control" type="file" id="fileUpload" name="file" accept="image/*,video/*,.pdf,.doc,.docx">
        </div>
        <div class="mb-3">
          <label for="notes" class="form-label">Optional Notes</label>
          <textarea class="form-control" id="notes" name="notes" rows="3" placeholder="Add any relevant notes..."></textarea>
        </div>
        <div class="text-center">
          <button type="submit" class="btn btn-primary">Submit Work</button>
        </div>
      </form>
    </div>

    <hr class="my-5">

    <h4 class="mb-4 text-center fade-in">Available Jobs</h4>
    <div class="row">
      {% for job in jobs %}
        <div class="col-md-6 mb-4 fade-in">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">{{ job.title }}</h5>
              <p class="card-text">{{ job.description }}</p>
              <p>
                <span class="badge bg-primary bg-gradient me-2">Budget: ${{ job.budget }}</span>
                <span class="badge bg-success bg-gradient">Deadline: {{ job.deadline }}</span>
              </p>
              <a href="/apply/{{ job.id }}" class="btn apply-btn mt-2">Apply</a>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>

  <!-- âœ… JS Code for Code Validation -->
  <script>
  function verifyCode() {
    const code = document.getElementById('codeInput').value;
    const validCodes = ['4510', '1234'];
    if (validCodes.includes(code)) {
      document.getElementById('errorMsg').style.display = 'none';
      document.getElementById('submit-work-form').style.display = 'block';
      document.getElementById('code-entry').style.display = 'none';
      window.scrollTo({ top: document.getElementById('submit-work-form').offsetTop, behavior: 'smooth' });
    } else {
      document.getElementById('errorMsg').style.display = 'block';
    }
  }
</script>

</body>
</html>
